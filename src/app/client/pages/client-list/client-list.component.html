<!-- Search + Add -->
<div class="flex items-center justify-between mb-4 gap-3">
  <mat-form-field appearance="outline" class="w-full max-w-md">
    <mat-label>Search client</mat-label>
    <input
      matInput
      type="text"
      (keyup)="applySearch($event)"
      placeholder="Code, name or owner"
    />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <button
    mat-flat-button
    color="primary"
    (click)="add()"
  >
    <mat-icon>add</mat-icon>
    Add Client
  </button>
</div>

<!-- Table -->
<div class="overflow-x-auto">
  <table
    mat-table
    [dataSource]="dataSource"
    matSort
    matSortDisableClear
    class="w-full mat-elevation-z2"
  >

    <!-- Code -->
    <ng-container matColumnDef="pharmacy_shop_code">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Code
      </th>
      <td mat-cell *matCellDef="let row">
        {{ row.pharmacy_shop_code }}
      </td>
    </ng-container>

    <!-- Name -->
    <ng-container matColumnDef="pharmacy_shop_name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Name
      </th>
      <td mat-cell *matCellDef="let row">
         <button
          color="warn"
          class="cursor-pointer"
          (click)="edit(row)"
        >
          {{ row.pharmacy_shop_name }}
        </button>
      </td>
    </ng-container>

    <!-- Owner -->
    <ng-container matColumnDef="pharmacy_shop_owner_name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Owner
      </th>
      <td mat-cell *matCellDef="let row">
        {{ row.pharmacy_shop_owner_name }}
      </td>
    </ng-container>

    <!-- Actions -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="text-right">
        Actions
      </th>
      <td mat-cell *matCellDef="let row" class="text-right">
        <button
          mat-icon-button
          color="primary"
          [routerLink]="['/client/edit', row.id]"
        >
          <mat-icon>edit</mat-icon>
        </button>

        <button
          mat-icon-button
          color="warn"
          (click)="delete(row)"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- Rows -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
    ></tr>

    <!-- Empty state -->
    <tr *ngIf="dataSource.data.length === 0">
      <td colspan="4" class="text-center py-6 text-gray-500">
        No clients found
      </td>
    </tr>
  </table>
</div>

<!-- Paginator -->
<mat-paginator
  [length]="total"
  [pageSize]="pageSize"
  [pageSizeOptions]="[5, 10, 25, 50]"
  showFirstLastButtons
>
</mat-paginator>
